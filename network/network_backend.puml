@startuml
!theme plain

actor "Internet User" as user
cloud "Internet" as internet
node "Router" as router
rectangle "Local Network" as network {
    node "Proxy Pi\n192.168.1.100" as proxy {
        component "Nginx" as nginx
        component "SSL Cert" as ssl
    }
    
    node "Pi 2\n192.168.1.101" as pi2 {
        component "App Server\n:8080" as app2
    }
    
    node "Pi 3\n192.168.1.102" as pi3 {
        component "App Server\n:8080" as app3
    }
    
    node "Pi 4\n192.168.1.103" as pi4 {
        component "App Server\n:8080" as app4
    }
}

user --> internet : HTTPS Request
internet --> router : Port 443
router --> proxy : Port 443\n(192.168.1.100)

nginx --> app2 : /app1/ → :8080
nginx --> app3 : /app2/ → :8080
nginx --> app4 : /app3/ → :8080

note right of router
  Only port 443 open
  Routes to proxy Pi only
end note

note left of nginx
  Routes based on path:
  /app1/ → Pi 2
  /app2/ → Pi 3
  /app3/ → Pi 4
end note

@enduml